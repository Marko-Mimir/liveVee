[gd_scene load_steps=9 format=3 uid="uid://bdk4v1yalw4s4"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_4j3bi"]
[ext_resource type="Texture2D" uid="uid://dwf3al7sgflwb" path="res://sprites/tmpPlyr.png" id="2_c3k07"]
[ext_resource type="Script" path="res://scripts/swordManager.gd" id="3_o3yit"]
[ext_resource type="Texture2D" uid="uid://cekb6jdpapb32" path="res://sprites/circle.png" id="4_1ef2y"]
[ext_resource type="Texture2D" uid="uid://b7dt74jochsi8" path="res://sprites/tmpplyr-arm.png" id="4_nurn6"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_m82m7"]
size = Vector2(34, 102)

[sub_resource type="SkeletonModification2DFABRIK" id="SkeletonModification2DFABRIK_axyaf"]
target_nodepath = NodePath("../../swordManager")
fabrik_data_chain_length = 2
joint_data/0/bone_index = 1
joint_data/0/bone2d_node = NodePath("shoulder/backarm")
joint_data/1/bone_index = 2
joint_data/1/bone2d_node = NodePath("shoulder/backarm/forearm")
joint_data/1/magnet_position = Vector2(-10, 10)
joint_data/1/use_target_rotation = false

[sub_resource type="SkeletonModificationStack2D" id="SkeletonModificationStack2D_43rpg"]
enabled = true
modification_count = 1
modifications/0 = SubResource("SkeletonModification2DFABRIK_axyaf")

[node name="CharacterBody2D" type="CharacterBody2D" node_paths=PackedStringArray("coyoteTimer", "sprite", "groundCast")]
collision_layer = 2
collision_mask = 5
script = ExtResource("1_4j3bi")
coyoteTimer = NodePath("coyoteTimer")
sprite = NodePath("TmpPlyr")
groundCast = NodePath("groundCast")

[node name="TmpPlyr" type="Sprite2D" parent="."]
position = Vector2(-4, 4)
texture = ExtResource("2_c3k07")
offset = Vector2(0, -2)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(1, -1)
shape = SubResource("RectangleShape2D_m82m7")

[node name="shoulder" type="Marker2D" parent="."]
position = Vector2(-4, -26)

[node name="swordManager" type="Marker2D" parent="." node_paths=PackedStringArray("shoulder")]
position = Vector2(11, 2)
script = ExtResource("3_o3yit")
shoulder = NodePath("../shoulder")

[node name="Circle" type="Sprite2D" parent="swordManager"]
scale = Vector2(0.1, 0.1)
texture = ExtResource("4_1ef2y")

[node name="coyoteTimer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true

[node name="groundCast" type="RayCast2D" parent="."]
position = Vector2(0, 42)
target_position = Vector2(0, 20)

[node name="arm" type="Node2D" parent="."]

[node name="polygons" type="Node2D" parent="arm"]

[node name="backarm" type="Polygon2D" parent="arm/polygons"]
position = Vector2(-15, -32)
texture = ExtResource("4_nurn6")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(14.6018, 0.442478, 19.5796, 9.0708, 18.9159, 25.2212, 14.1593, 30.0885, 6.96903, 28.208, 2.98673, 2.98673, 7.41151, 0.331858)
uv = PackedVector2Array(14.6018, 0.442478, 19.5796, 9.0708, 18.9159, 25.2212, 14.1593, 30.0885, 6.96903, 28.208, 2.98673, 2.98673, 7.41151, 0.331858)
bones = ["shoulder", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0), "shoulder/backarm", PackedFloat32Array(1, 1, 0, 1, 1, 1, 1), "shoulder/backarm/forearm", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0), "shoulder/backarm/forearm/hand", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0)]

[node name="forearm" type="Polygon2D" parent="arm/polygons"]
position = Vector2(-32, -17)
texture = ExtResource("4_nurn6")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(23.4513, 6.63717, 24.7788, 25.5531, 31.8584, 29.9779, 35.6195, 25.1106, 35.3982, 12.0575, 32.7434, 4.31416, 25.5531, 4.31416)
uv = PackedVector2Array(23.4513, 6.63717, 24.7788, 25.5531, 31.8584, 29.9779, 35.6195, 25.1106, 35.3982, 12.0575, 32.7434, 4.31416, 25.5531, 4.31416)
bones = ["shoulder", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0), "shoulder/backarm", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0), "shoulder/backarm/forearm", PackedFloat32Array(1, 1, 1, 1, 1, 1, 1), "shoulder/backarm/forearm/hand", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0)]

[node name="hand" type="Polygon2D" parent="arm/polygons"]
position = Vector2(-48, -5)
texture = ExtResource("4_nurn6")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(40.3761, 19.9115, 47.5664, 24.4469, 50.885, 21.1283, 50.6637, 11.8363, 45.9071, 8.96018, 41.3717, 11.615)
uv = PackedVector2Array(40.3761, 19.9115, 47.5664, 24.4469, 50.885, 21.1283, 50.6637, 11.8363, 45.9071, 8.96018, 41.3717, 11.615)
bones = ["shoulder", PackedFloat32Array(0, 0, 0, 0, 0, 0), "shoulder/backarm", PackedFloat32Array(0, 0, 0, 0, 0, 0), "shoulder/backarm/forearm", PackedFloat32Array(0, 0, 0, 0, 0, 0), "shoulder/backarm/forearm/hand", PackedFloat32Array(1, 1, 1, 1, 1, 1)]

[node name="Skeleton2D" type="Skeleton2D" parent="arm"]
modification_stack = SubResource("SkeletonModificationStack2D_43rpg")

[node name="shoulder" type="Bone2D" parent="arm/Skeleton2D"]
position = Vector2(-4, -26)
rotation = 0.329239
rest = Transform2D(0.993632, 0.112675, -0.112675, 0.993632, -4, -26)

[node name="backarm" type="Bone2D" parent="arm/Skeleton2D/shoulder"]
rotation = -0.187663
scale = Vector2(0.999996, 0.999996)
rest = Transform2D(0.994572, -0.104048, 0.104048, 0.994572, 0, 0)
metadata/_local_pose_override_enabled_ = true

[node name="forearm" type="Bone2D" parent="arm/Skeleton2D/shoulder/backarm"]
position = Vector2(0, 18)
rotation = -0.844853
rest = Transform2D(0.996376, 0.0850576, -0.0850576, 0.996376, 0, 18)
metadata/_local_pose_override_enabled_ = true

[node name="hand" type="Bone2D" parent="arm/Skeleton2D/shoulder/backarm/forearm"]
position = Vector2(6.35669, 17.8771)
rotation = 1.6488
rest = Transform2D(0.997181, -0.0750361, 0.0750361, 0.997181, 2, 16)
